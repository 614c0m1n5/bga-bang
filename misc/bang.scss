/**
 *------
 * BGA framework: © Gregory Isabelli <gisabelli@boardgamearena.com> & Emmanuel Colin <ecolin@boardgamearena.com>
 * bang implementation : © <Your name here> <Your email address here>
 *
 * This code has been produced on the BGA studio platform for use on http://boardgamearena.com.
 * See http://en.boardgamearena.com/#!doc/Studio for more information.
 * -----
 *
 * bang.css
 *
 * bang stylesheet
 *
 */

 @font-face {
     font-family: 'Perdido';
     src: url('img/fonts/PerdidoDemo.woff2') format('woff2'),
         url('img/fonts/PerdidoDemo.woff') format('woff'),
         url('img/fonts/PerdidoDemo.ttf') format('truetype');
     font-weight: normal;
     font-style: normal;
     font-display: swap;
}

@font-face {
    font-family: 'Palatino Linotype';
    src: url('PalatinoLinotype-Italic.woff2') format('woff2'),
        url('PalatinoLinotype-Italic.woff') format('woff'),
        url('PalatinoLinotype-Italic.ttf') format('truetype');
    font-weight: normal;
    font-style: italic;
    font-display: swap;
}

$transparentWhite:rgba(255,255,255,0.5);
$darkgray: rgba(50,50,50, 0.8);

$numberOfSymbols:15;
$numberOfCharacters:15;
$numberOfCards:21;
$guns: 0,1,2,3,4;
$actions: 5,6,7,8,9,10,11,12,13,14;
$equipments: 15,16,17,18,19,20,21;


$layoutBig:(
  4:(
    0:("col" : 3, "row" : 2, "align": center),
    1:("col" : 5, "row" : 3, "align": left),
    2:("col" : 3, "row" : 4, "align": center),
    3:("col" : 1, "row" : 3, "align": right),
  ),
  5:(
    0:("col" : 3, "row" : 2, "align": center),
    1:("col" : 5, "row" : 3, "align": left),
    2:("col" : 4, "row" : 5, "align": center),
    3:("col" : 2, "row" : 5, "align": center),
    4:("col" : 1, "row" : 3, "align": right),
  )
);

div#board {
	width:100%;
	min-height:800px;
	position:relative;
	display:grid;
	grid-template-columns: repeat(6, 1fr);

  div#hand {
  	background-color:$transparentWhite;
  	border-radius: 5px;
  	grid-row:1;
  	grid-column:1 / span 6;
  	height:215px;
  	display:flex;
  	flex-flow:row;

    div#role-container {
      flex-grow:0;
      width:140px;
      display:flex;
      align-items: center;
      justify-content: center;
      background-color:white;

      div#role-card {
        height:200px;
        width:124px;
        background-image:url("img/roles.png");
        background-size:cover;
      }

      @for $i from 0 through 3 {
        &[data-role="#{$i}"] div#role-card { background-position:$i*100%/3 center; }
      }
    }



    div#hand-cards {
      flex-grow:1;
      display:flex;
    	flex-flow:row;
      align-items: center;
      justify-content: center;
    }
  }

  .bang-player {
    display:flex;
    flex-flow:row;
    align-items: center;
    grid-row-end:span 2;
    grid-column-end:span 2;
    max-height:206px;
  }

  // TODO : add media query
  @each $nPlayers, $layout in $layoutBig {
    &[data-players="#{$nPlayers}"] .bang-player {
      @each $i, $place in $layout {
        &[data-no="#{$i}"] {
          grid-column-start: map-get($place, 'col');
          grid-row-start: map-get($place, 'row');

          @if map-get($place, 'align') == left   { justify-content: flex-start; }
          @if map-get($place, 'align') == center { justify-content: center; }
          @if map-get($place, 'align') == right  { justify-content: flex-end; }
        }
      }
    }
  }


  .bang-player {
    .bang-player-container {
      width:96%;
      height:96%;
      background-color:$transparentWhite;
      border-radius:5px;
      border:1px solid $darkgray;
      box-shadow: 1px 1px 5px $darkgray;
      display:flex;

      .player-inplay {
        flex-grow:1;
      }

      .player-info {
        position:relative;
        width:123px;
        height:100%;
        background-image:url("img/card_borders.png");
        background-size:cover;
        border-left:1px solid $darkgray;

        .player-character-name {
          font-family: "Perdido";
          width: 100%;
          max-height:22px;
          margin-top: 12px;
          text-align: center;
          font-size: 17px;
          transform: scale(0.8,1.3);
          transform-origin: top center;
        }

        .player-character-background {
          width: 105px;
          height: 105px;
          margin: 4px auto;
          background-image:url("img/card_characters.jpg");
        	background-size:cover;
        }
        @for $i from 0 through $numberOfCharacters {
          &[data-character="#{$i}"] .player-character-background { background-position:$i * 100% / $numberOfCharacters center; }
        }

        .player-name {
          text-align: center;
        }

        .player-cards {
          text-align: center;

          .player-hand-card {
            display:inline-block;
            width: 22px;
            height: 22px;
            background-image: url("img/cards.svg");
            background-size: contain;
            background-repeat: no-repeat;
            vertical-align: bottom;
          }
        }

        .player-bullets {
          position:absolute;
          width:30px;
          right:-8px;
          top:40px;

          .bullet {
            width: 35px;
            height: 13px;
            background-image: url("img/bullet.png");
            background-size: cover;
            margin: 1px 0px;
            transform: rotate(13deg);
            background-position:0% 100%;
          }
        }

        .player-star {
          display:none;
          position:absolute;
          top: -17px;
          right: -12px;
          width: 30px;
          height: 34px;
          background-image:url("img/sheriff.svg");
          background-size:cover;
        }
      }
    }
    &[data-role="0"] .bang-player-container .player-info .player-star { display:block; }

    @for $maxBullets from 3 through 6 {
      @for $n from $maxBullets + 1 through 6 {
        &[data-max-bullets="#{$maxBullets}"] .bang-player-container .player-info .player-bullets .bullet:nth-child(#{$n}) { display:none; }
      }
    }

    @for $bullets from 0 through 6 {
      @for $n from 1 through $bullets {
        &[data-bullets="#{$bullets}"] .bang-player-container .player-info .player-bullets .bullet:nth-child(#{$n}) { background-position:0 0; }
      }
    }

    @for $i from 0 through 6 {
      &[data-hand="#{$i}"] .player-cards .player-handcount::before { content:"#{$i}"; }
    }
    @for $i from 0 through 6 {
      &[data-bullets="#{$i}"] .player-cards .player-maxhand::before { content:"#{$i}"; }
    }
  }
}


div.bang-card-tooltip {
  div.bang-card-tooltip-sizing {
    width:250px;
    height:400px;
    display:flex;
    justify-content: center;
    align-items: center;

    div.bang-card {
      transform:scale(2);
    }
  }
}

div.bang-card {
	position:relative;
	width:125px;
	height:200px;
	margin:5px;
	background-image:url("img/card_borders.png");
	background-size:cover;

  &.unselectable {
    opacity:0.5;
    cursor:not-allowed;
  }

  &.selectable {
    cursor:pointer;
    &:hover {
      transform:scale(1.05);
      transform-origin: center center;
    }
  }

  @each $card in $actions    { &[data-type="#{$card}"] { background-position:1 * 100% / 3 center; } }
  @each $card in $equipments { &[data-type="#{$card}"] { background-position:2 * 100% / 3 center; } }
  @each $card in $guns       { &[data-type="#{$card}"] { background-position:3 * 100% / 3 center; } }

  .card-name {
  	position:absolute;
  	top: 12px;
  	width: 100%;
  	height: 40px;
  	text-align: center;
  	font-family: "Perdido";
  	font-size: 23px;
    transform: scale(0.8,1.3);
    transform-origin: top center;
  }

  .card-background {
  	position:absolute;
  	top: 42px;
  	left: 10px;
  	width: 105px;
  	height: 149px;
  	background-image:url("img/card_backgrounds.jpg");
  	background-size:cover;
  }
  @for $i from 0 through $numberOfCards {
    &[data-type="#{$i}"] .card-background { background-position:$i * 100% / $numberOfCards center; }
  }
}
